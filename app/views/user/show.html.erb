

<h2 class="text-center">"Now isn't the time for that" -Prof Oak</h2>
<h1>My name is <%=@current_user.name%></h1>
<p>Email: <%=@current_user.email%></p>
<p>Longest Streak: <%=@current_user.streak%></p>
<%if @paycycle %>
    <p>Paycycle: <%=@paycycle.name.capitalize%></p>
<%end%>
<p>Gym: <%= @current_user.gym.name %></p>

<p>Number of checkins this month: <%= @checkins.length %></p>



<div class="col-xs-6 graphs" id="graphs">
    <div id="chart">
    </div>
    <h1 id="message">
    </h1>
    <div class="btn-group" id="graphBtn">
        <button type="button" id="barTrue" class="btn btn-primary toggle"><i class="fa fa-bar-chart" aria-hidden="true"></i></button>
        <button type="button" id="barFalse" class="btn btn-primary toggle"><i class="fa fa-tasks" aria-hidden="true"></i></button>
    </div>
</div>
<div class="col-xs-6 graphs">
    <div id="pie">
    </div>
</div>


<script>
    var bar = true;
    var isGoal = false;
    var chart, chart2;
    var numCheckins = gon.num_checkins;
    var maxCheckins = gon.max_checkins;
    var daysLeft = gon.days_left;

renderChart();
$("#barTrue").css("background-color", "#205A66")
function changeBorder() {
    if (bar) {
        $("#barTrue").css("background-color", "#205A66")
        $("#barFalse").css("background-color", "#FFA24F")
    } else {
        $("#barTrue").css("background-color", "#FFA24F")
        $("#barFalse").css("background-color", "#205A66")
    }
}

$("#barTrue").click(function() {
    bar = true
    console.log(bar)
    renderChart();
    changeBorder();
});

$("#barFalse").click(function() {
    bar = false
    console.log(bar)
    renderChart();
    changeBorder();
});

function renderChart() {
    if(bar){
        $("#message").html("Days a week per month")
        var chart = c3.generate({
            data: {
                columns: [
                    ['April', 2, 3, 0, 1],
                ]
            }
        });
    } else {
        $("#message").html("Money earned!")
        var chart2 = c3.generate({
            bindto: '#chart',
            data: {
                columns: [
                    ['Dollars Saved', (numCheckins)],
                ],
                type: 'gauge',
            },
            color: {
                pattern: ['#FFA24F', '#FFA24F', '#FFA24F', '#60B044'], // the three color levels for the percentage values.
                threshold: {
                    values: [maxCheckins]
                }
            },
            size: {
                height: 180
            },
            gauge: {
                max: maxCheckins,
                label: {
                    format: function(val, ratio){
                        return '$' + val;
                    }
                }
            },
        });
    }

var chart3 = c3.generate({
            bindto: '#pie',
            data: {
            columns: [
                ['Days Gone', numCheckins],
                ['Days Left', daysLeft],
                ['Money Lost', maxCheckins - numCheckins - daysLeft]
            ],
            type: 'pie'
            }
        });
}

</script>
